# DriveNote iOS - 產品需求文檔 (PRD)

## 1. 執行摘要

DriveNote iOS是一款專為Uber等車輛共乘平台司機設計的收支管理應用，重點是幫助英國地區的司機追蹤收入、支出、里程和工時，並為稅務申報做好準備。該MVP專注於簡單易用的數據輸入、清晰的收支分析以及符合英國稅法的支出分類，旨在幫助司機提高業務透明度及稅務合規性。

## 2. 產品概述

### 2.1 目標用戶

- 英國Uber及其他共乘平台司機
- 需要追蹤業務支出並理解稅務影響的自僱人士
- 想要更清晰了解其業務盈利能力的司機

### 2.2 核心價值主張

- 簡化收支記錄過程
- 提供實時的業務績效指標（時薪、里程成本/收入等）
- 自動識別可抵稅支出
- 離線優先的設計，減少對網絡連接的依賴

## 3. 用戶故事

1. **支出記錄**：「作為Uber司機，我想快速拍攝並記錄加油收據，以便追蹤我的業務支出。」
2. **里程追蹤**：「作為司機，我想記錄每日工作里程，以便計算我的車輛使用成本。」
3. **時間記錄**：「作為司機，我想記錄我的工作時間，以便了解我的實際時薪。」
4. **稅務分析**：「作為自僱人士，我想知道哪些支出可抵稅，以便最大化我的稅務減免。」
5. **業績概覽**：「作為業務主，我想查看我的收入、支出和利潤的概要，以便了解我的業務健康狀況。」

## 4. 功能需求

### 4.1 MVP核心功能

#### 4.1.1 支出記錄
- 手動輸入支出（金額、日期、類別、描述）
- 上傳收據圖片
- 透過Google Gemini 2.0 Flash API自動提取收據信息
- 支出分類（燃料、保險、維修、牌照稅、其他）
- 標記支出是否可抵稅及其適用比例

#### 4.1.2 里程記錄
- 手動輸入每日工作里程（起點/終點讀數或總里程）
- 記錄行程目的
- 與燃料支出關聯（可選）

#### 4.1.3 工時記錄
- 手動輸入工作時間（開始/結束時間或總時數）
- 簡單的計時器功能（開始/停止）
- 每日工作記錄

#### 4.1.4 收入記錄
- 手動輸入每日收入
- 區分小費和基本收入

#### 4.1.5 儀表板/概覽
- 顯示關鍵指標：
  - 平均時薪
  - 每英里成本與收入
  - 收支平衡狀況
- 圖形化表示週/月/年收支趨勢
- 稅務概覽（可抵稅支出總額）

### 4.2 次要功能（可在MVP後期加入）
- 收據圖片庫管理
- 基礎報告生成（收支報表、可抵稅項目清單）
- iCloud同步備份
- 收支分類報告

## 5. 技術需求

### 5.1 前端架構
- **開發語言**: Swift + SwiftUI
- **開發環境**: Xcode 14.3
- **目標設備**: iPhone (iOS 15+)
- **離線存儲**: Core Data
- **數據備份**: 本地文件系統 + iCloud (可選)

### 5.2 後端架構
- **選定方案**: Firebase
- **組件**:
  - Firebase Authentication (用於可選的用戶註冊)
  - Cloud Firestore (NoSQL數據庫)
  - Firebase Storage (收據圖片儲存)
  - Firebase Functions (與Gemini API集成)
- **優點**:
  - 簡單集成與設置
  - 支持離線操作與同步
  - 免費額度適合MVP階段
  - 無需維護自有伺服器
  - 良好的iOS SDK支持

### 5.3 AI OCR集成
- **選定方案**: Google Gemini 2.0 Flash API
- **實現方式**:
  - 本地捕獲收據圖片
  - 使用Firebase Functions作為中間層調用Gemini API
  - 解析結果返回應用並用於自動填充支出表單
- **優點**:
  - 高精度的收據解析
  - 可理解複雜的收據格式和上下文
  - API定價適合MVP階段使用量

## 6. 用戶註冊建議

**建議**: MVP階段不強制要求用戶註冊

**理由**:
- 降低使用門檻，提高初期採用率
- 避免後端認證系統的複雜性
- 符合離線優先的設計原則

**替代方案**: 
- 使用設備ID作為唯一標識
- 提供可選的帳號創建，用於數據備份和跨設備同步
- 使用Sign in with Apple簡化未來的註冊流程

## 7. MVP功能優先級

### 第一階段 (核心MVP)
1. 支出記錄（手動輸入）
2. 里程記錄
3. 工時記錄
4. 基礎儀表板（時薪、成本計算）
5. 本地數據存儲

### 第二階段 (MVP擴展)
1. 收據圖片上傳
2. Gemini API OCR整合
3. 可抵稅項目識別
4. 基礎報表生成
5. Firebase數據備份

### 第三階段 (MVP+)
1. 用戶註冊與雲端同步
2. 高級報表與圖表
3. 稅務計算器
4. 收據管理系統
5. 提醒和通知

## 8. 未來發展與營利策略

### 短期營利模式 (6-12個月)
1. **免費增值模式**:
   - 基本功能免費
   - 高級功能（高級報表、完整OCR、稅務顧問）付費升級
   - 推薦價格: £3.99/月或£29.99/年

2. **按年訂閱**:
   - 針對納稅季節設計的年度訂閱計劃
   - 包含完整報稅周期的所有高級功能
   - 推薦價格: £39.99/年

### 中期營利模式 (1-2年)
1. **合作夥伴推薦**:
   - 與稅務顧問、保險公司合作
   - 為用戶提供專業服務推薦
   - 獲取推薦傭金

2. **白標服務**:
   - 向車隊管理公司或Uber等平台提供白標解決方案
   - 按用戶數量收費

### 長期營利模式 (2年+)
1. **數據洞察**:
   - 匿名化聚合數據提供市場洞察
   - 向交通、保險、共乘平台等相關行業銷售報告

2. **全面業務管理套件**:
   - 擴展為完整的自僱者業務管理平台
   - 整合銀行、會計和稅務服務
   - 高級訂閱定價

## 9. 開發時間表

### 階段1: 準備與規劃 (2週)
- 系統架構設計
- UI/UX設計
- 數據模型定義
- Firebase設置
- Gemini API集成準備

### 階段2: 核心開發 (6週)
- Core Data數據模型實現
- UI構建
- 基本CRUD操作
- Firebase整合
- 本地存儲實現

### 階段3: 功能整合與測試 (4週)
- Gemini API OCR整合
- 報表生成功能
- Firebase備份功能
- 初步測試與bug修復

### 階段4: 優化與發布準備 (2週)
- 性能優化
- 最終測試
- App Store提交準備
- 用戶文檔編寫

### 總計時間: 約14週（3.5個月）

## 10. 技術注意事項

### 關於2017 MacBook Pro與Xcode 14.3
- Xcode 14.3需要macOS Ventura (13.x)
- 2017 MacBook Pro可以運行該版本但可能性能較慢
- 建議:
  - 增加RAM至16GB (如果尚未升級)
  - 使用外部SSD作為開發驅動器
  - 優先使用模擬器而非實機測試以提高開發效率

### 關於SwiftUI相容性
- SwiftUI在iOS 15+上提供最佳體驗
- 為確保兼容性，建議將最低支持版本設為iOS 15
- 使用新的SwiftUI生命週期管理以確保更好的性能